<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>AsiaX Pro Sudoku</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@800;900&family=Rajdhani:wght@600;700&display=swap');

:root{
  --bg: linear-gradient(135deg,#000428,#004e92);
  --card: #0f172a;
  --accent: #00ff88;
  --glow: #00ff8844;
  --text: #e0f2fe;
}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100dvh;overflow:hidden;background:var(--bg);color:var(--text);font-family:'Rajdhani',sans-serif;display:flex;flex-direction:column}

.main{flex:1;overflow-y:auto;padding:8px 8px 120px 8px;display:flex;flex-direction:column;gap:12px}

header{text-align:center;padding:14px;background:rgba(0,0,0,0.4);border-radius:16px;backdrop-filter:blur(12px);border:1px solid rgba(0,255,136,0.3)}
.logo{font-family:'Orbitron',sans-serif;font-size:32px;font-weight:900;background:linear-gradient(90deg,#00ff88,#00d4ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent}

.timer{text-align:center;font-family:'Orbitron';font-size:36px;font-weight:900;background:linear-gradient(90deg,#00ff88,#00d4ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent}

.board-wrapper{display:flex;justify-content:center;padding:10px 0}
.board{display:grid;grid-template-columns:repeat(9,1fr);gap:3px;background:#000814;padding:12px;border-radius:20px;width:94vw;max-width:420px;aspect-ratio:1;
box-shadow:0 0 40px var(--glow),0 15px 40px #000c;border:2px solid rgba(0,255,136,0.4)}

.cell{background:#1e293b;border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:5.8vw;transition:.2s}
@media(min-width:400px){.cell{font-size:23px}}
.cell.fixed{background:#1e40af;color:#93c5fd}
.cell.selected{background:var(--glow);transform:scale(1.06);box-shadow:0 0 20px var(--accent)}
.cell.conflict{background:#ff333355;animation:p 1s infinite}
@keyframes p{0%,100%{opacity:1}50%{opacity:0.6}}

.thick-right{border-right:3px solid var(--accent)!important}
.thick-bottom{border-bottom:3px solid var(--accent)!important}

.bottom-bar{position:fixed;bottom:0;left:0;right:0;background:rgba(10,15,35,0.96);backdrop-filter:blur(15px);
padding:12px 12px max(env(safe-area-inset-bottom),12px) 12px;border-top:1px solid rgba(0,255,136,0.3);z-index:1000}

.controls-top{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:8px}
button,select{padding:14px;border-radius:12px;border:none;font-weight:700;font-size:16px;background:#1e293b;color:var(--text);border:1px solid rgba(0,255,136,0.4)}
.accent-btn{background:var(--accent)!important;color:#000;font-weight:900}

.numpad{display:grid;grid-template-columns:repeat(5,1fr);gap:9px}
.numpad button{aspect-ratio:1;font-size:26px;font-weight:900;background:#1e293b;border-radius:12px;border:1px solid rgba(0,255,136,0.3)}
.numpad button:last-child{grid-column:span 2;background:var(--accent);color:#000}

footer{text-align:center;padding:8px;font-size:12px;opacity:0.7}
</style>
</head>
<body>

<div class="main">
  <header><div class="logo">ASIAX PRO</div><div style="font-size:14px;margin-top:4px">Sudoku Master</div></header>
  <div class="timer" id="timer">00:00</div>
  <div class="board-wrapper"><div id="board" class="board"></div></div>
  <div class="controls-top">
    <select id="diff">
      <option value="easy">Easy</option>
      <option value="medium" selected>Medium</option>
      <option value="hard">Hard</option>
    </select>
    <button id="newBtn" class="accent-btn">NEW GAME</button>
  </div>
</div>
<div class="bottom-bar">
  <div class="numpad" id="numpad"></div>
  <div style="display:flex;gap:8px;margin-top:10px">
    <button id="hintBtn">Hint</button>
    <button id="undoBtn">Undo</button>
    <button id="eraseBtn">Erase</button>
    <button id="checkBtn">Check</button>
  </div>
</div>

<script>
(() => {
  const board = document.getElementById('board');
  const timer = document.getElementById('timer');
  const diff = document.getElementById('diff');
  const newBtn = document.getElementById('newBtn');
  const hintBtn = document.getElementById('hintBtn');
  const undoBtn = document.getElementById('undoBtn');
  const eraseBtn = document.getElementById('eraseBtn');
  const checkBtn = document.getElementById('checkBtn');
  const numpad = document.getElementById('numpad');

  let grid = [], solution = [], fixed = [], selected = null, history = [], startTime, interval;

  const removeCount = {easy:35, medium:43, hard:51};

  function fmt(s){ let m=Math.floor(s/60).toString().padStart(2,'0'); return m+':'+(s%60).toString().padStart(2,'0'); }
  function startTimer(){ clearInterval(interval); startTime=Date.now(); interval=setInterval(()=>{timer.textContent=fmt(Math.floor((Date.now()-startTime)/1000))},500); }

  function newGame(){
    solution = createSolution();
    grid = solution.map(r=>r.slice());
    let cnt = removeCount[diff.value];
    let pos = Array.from({length:81},(_,i)=>i);
    for(let i=pos.length-1;i>0;i--){ let j=Math.floor(Math.random()*(i+1)); [pos[i],pos[j]]=[pos[j],pos[i]]; }
    for(let i=0;i<cnt;i++){ let p=pos[i], r=Math.floor(p/9), c=p%9; grid[r][c]=0; }
    fixed = grid.map(row=>row.map(v=>v>0));
    history=[];
    render();
    startTimer();
  }

  function createSolution(){
    let g = Array(9).fill().map(()=>Array(9).fill(0));
    let nums=[1,2,3,4,5,6,7,8,9];
    function fill(r=0,c=0){
      if(c===9) return fill(r+1,0);
      if(r===9) return true;
      if(g[r][c]!==0) return fill(r,c+1);
      let sh=[...nums]; for(let i=sh.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[sh[i],sh[j]]=[sh[j],sh[i]];}
      for(let n of sh){
        if(valid(g,r,c,n)){
          g[r][c]=n;
          if(fill(r,c+1)) return true;
          g[r][c]=0;
        }
      }
      return false;
    }
    fill();
    return g;
  }

  function valid(g,r,c,n){
    for(let i=0;i<9;i++) if(g[r][i]===n || g[i][c]===n) return false;
    let br=r-r%3, bc=c-c%3;
    for(let i=0;i<3;i++)for(let j=0;j<3;j++) if(g[br+i][bc+j]===n) return false;
    return true;
  }

  function render(){
    board.innerHTML='';
    for(let r=0;r<9;r++)for(let c=0;c<9;c++){
      let cell=document.createElement('div');
      cell.className='cell';
      if(c%3===2 && c!==8) cell.classList.add('thick-right');
      if(r%3===2 && r!==8) cell.classList.add('thick-bottom');
      if(fixed[r][c]) cell.classList.add('fixed');
      if(grid[r][c]) cell.textContent=grid[r][c];
      cell.onclick=()=>select(r,c);
      board.appendChild(cell);
    }
    highlight();
  }

  function select(r,c){ selected={r,c}; highlight(); }
  function highlight(){
    Array.from(board.children).forEach(e=>e.classList.remove('selected','conflict'));
    if(!selected) return;
    let i=selected.r*9+selected.c;
    board.children[i].classList.add('selected');
    let v=grid[selected.r][selected.c];
    if(v)for(let j=0;j<81;j++){
      let rr=Math.floor(j/9), cc=j%9;
      if(grid[rr][cc]===v && (rr===selected.r || cc===selected.c || (Math.floor(rr/3)===Math.floor(selected.r/3) && Math.floor(cc/3)===Math.floor(selected.c/3)))){
        board.children[j].classList.add('conflict');
      }
    }
  }

  function put(num){
    if(!selected || fixed[selected.r][selected.c]) return;
    history.push({r:selected.r, c:selected.c, old:grid[selected.r][selected.c]});
    grid[selected.r][selected.c] = grid[selected.r][selected.c]===num ? 0 : num;
    render();
    checkWin();
  }
  function checkWin(){
    if(grid.flat().includes(0)) return;
    for(let r=0;r<9;r++)for(let c=0;c<9;c++){
      let v=grid[r][c];
      grid[r][c]=0;
      if(!valid(grid,r,c,v)){ grid[r][c]=v; return; }
      grid[r][c]=v;
    }
    clearInterval(interval);
    setTimeout(()=>alert('Badhai ho bhai! Time: '+timer.textContent+' ðŸ”¥'),200);
  }

  // Numpad
  for(let i=1;i<=9;i++){
    let b=document.createElement('button');
    b.textContent=i; b.onclick=()=>put(i);
    numpad.appendChild(b);
  }
  let clr=document.createElement('button');
  clr.textContent='Clear'; clr.onclick=()=>put(0);
  numpad.appendChild(clr);

  hintBtn.onclick=()=>{ if(selected && !grid[selected.r][selected.c]) put(solution[selected.r][selected.c]); }
  undoBtn.onclick=()=>{ if(history.length){ let h=history.pop(); grid[h.r][h.c]=h.old; render(); } }
  eraseBtn.onclick=()=>put(0);
  checkBtn.onclick=()=>highlight();
  newBtn.onclick=newGame;

  newGame();
})();
</script>
</body>
</html>
