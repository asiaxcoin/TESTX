<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>AsiaX Pro Sudoku</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@800;900&family=Rajdhani:wght@600;700&display=swap');

*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100dvh;overflow:hidden;background:linear-gradient(135deg,#000428,#004e92);color:#e0f2fe;font-family:'Rajdhani',sans-serif;display:flex;flex-direction:column}

.main{flex:1;overflow-y:auto;padding:10px 10px 140px 10px;display:flex;flex-direction:column;gap:12px}

header{text-align:center;padding:16px 0;background:rgba(0,0,0,0.45);border-radius:18px;backdrop-filter:blur(12px);border:1px solid rgba(0,255,136,0.3)}
.logo{font-family:'Orbitron',sans-serif;font-size:34px;font-weight:900;background:linear-gradient(90deg,#00ff88,#00d4ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:1px}

.timer{text-align:center;font-family:'Orbitron';font-size:38px;font-weight:900;background:linear-gradient(90deg,#00ff88,#00d4ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin:8px 0}

.board-wrapper{display:flex;justify-content:center;align-items:center;flex:1;min-height:300px}
.board{display:grid;grid-template-columns:repeat(9,1fr);gap:2.5px;background:#000814;padding:9px;border-radius:20px;width:92vw;max-width:400px;aspect-ratio:1;
box-shadow:0 0 40px #00ff8844, inset 0 0 30px #000c;border:2px solid rgba(0,255,136,0.5)}

.cell{background:#1e293b;border-radius:9px;display:flex;align-items:center;justify-content:center;font-weight:700 5.5vw Rajdhani;color:#e0f2fe;transition:.2s}
@media(min-width:380px){.cell{font-size:21px}}
.cell.fixed{background:#1e40af;color:#93c5fd;font-weight:800}
.cell.selected{background:#00ff8833;transform:scale(1.07);box-shadow:0 0 25px #00ff88}
.cell.conflict{background:#ff333344;animation:glow 1.2s infinite}
@keyframes glow{0%,100%{opacity:1}50%{opacity:0.6}}

.thick-right{border-right:3px solid #00ff88 !important}
.thick-bottom{border-bottom:3px solid #00ff88 !important}

/* Fixed Bottom Bar â€” keyboard ke upar bhi perfect dikhega */
.bottom-bar{
  position:fixed;bottom:0;left:0;right:0;
  background:linear-gradient(to top,rgba(10,15,35,0.98),rgba(10,15,35,0.9));
  backdrop-filter:blur(15px);
  padding:10px 12px max(env(safe-area-inset-bottom),12px) 12px;
  border-top:1px solid rgba(0,255,136,0.4);
  z-index:1000;
}

.numpad{
  display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-bottom:8px;
}
.numpad button{
  height:52px;font-size:24px;font-weight:900;background:#1e293b;color:#e0f2fe;
  border-radius:14px;border:1.5px solid rgba(0,255,136,0.4);box-shadow:0 4px 10px #0008;
}
.numpad button:nth-child(10){ /* Clear button */
  background:#00ff88;color:#000;font-size:20px;grid-column:1/3;
}

.controls-bottom{
  display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:8px;
}
.controls-bottom button{
  height:46px;font-size:15px;font-weight:700;background:#1e293b;color:#e0f2fe;
  border-radius:12px;border:1.5px solid rgba(0,255,136,0.4);
}

.accent-btn{background:#00ff88 !important;color:#000 !important;font-weight:900}

.controls-top{display:grid;grid-template-columns:1fr 1fr;gap:10px}
button,select{
  padding:14px;border-radius:14px;border:none;font-weight:700;background:#1e293b;color:#e0f2fe;
  border:1.5px solid rgba(0,255,136,0.4);font-size:16px
}
</style>
</head>
<body>

<div class="main">
  <header><div class="logo">ASIAX PRO</div><div style="font-size:15px;margin-top:5px;opacity:0.9">Sudoku Master Edition</div></header>
  <div class="timer" id="timer">00:00</div>
  <div class="board-wrapper"><div id="board" class="board"></div></div>
  <div class="controls-top">
    <select id="diff">
      <option value="easy">Easy</option>
      <option value="medium" selected>Medium</option>
      <option value="hard">Hard</option>
    </select>
    <button id="newBtn" class="accent-btn">NEW GAME</button>
  </div>
</div>

<div class="bottom-bar">
  <div class="numpad" id="numpad"></div>
  <div class="controls-bottom">
    <button id="hintBtn">Hint</button>
    <button id="undoBtn">Undo</button>
    <button id="eraseBtn">Erase</button>
    <button id="checkBtn">Check</button>
  </div>
</div>

<script>
(() => {
  const board = document.getElementById('board');
  const timer = document.getElementById('timer');
  const diff = document.getElementById('diff');
  const newBtn = document.getElementById('newBtn');
  const hintBtn = document.getElementById('hintBtn');
  const undoBtn = document.getElementById('undoBtn');
  const eraseBtn = document.getElementById('eraseBtn');
  const checkBtn = document.getElementById('checkBtn');
  const numpad = document.getElementById('numpad');

  let grid = [], solution = [], fixed = [], sel = null, hist = [], start, intv;

  const rem = {easy:34, medium:42, hard:50};

  function fmt(t){let m=(''+Math.floor(t/60)).padStart(2,'0');return m+':'+(''+t%60).padStart(2,'0');}
  function startTimer(){clearInterval(intv);start=Date.now();intv=setInterval(()=>{timer.textContent=fmt(Math.floor((Date.now()-start)/1000))},500);}

  function newGame(){
    solution = gen();
    grid = solution.map(r=>r.slice());
    let pos = Array.from({length:81},(_,i)=>i);
    for(let i=pos.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[pos[i],pos[j]]=[pos[j],pos[i]];}
    let cnt = rem[diff.value];
    for(let i=0;i<cnt;i++){let p=pos[i],r=Math.floor(p/9),c=p%9;grid[r][c]=0;}
    fixed = grid.map(r=>r.map(v=>v>0));
    hist=[];
    render();
    startTimer();
  }

  function gen(){
    let g=Array(9).fill().map(()=>Array(9).fill(0));
    let n=[1,2,3,4,5,6,7,8,9];
    function f(r=0,c=0){
      if(c===9)return f(r+1,0);
      if(r===9)return true;
      if(g[r][c])return f(r,c+1);
      let s=n.slice();for(let i=s.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[s[i],s[j]]=[s[j],s[i]];}
      for(let v of s){
        if(ok(g,r,c,v)){
          g[r][c]=v;
          if(f(r,c+1))return true;
          g[r][c]=0;
        }
      }
      return false;
    }
    f();return g;
  }

  function ok(g,r,c,v){
    for(let i=0;i<9;i++)if(g[r][i]===v||g[i][c]===v)return false;
    let br=r-r%3,bc=c-c%3;
    for(let i=0;i<3;i++)for(let j=0;j<3;j++)if(g[br+i][bc+j]===v)return false;
    return true;
  }

  function render(){
    board.innerHTML='';
    for(let r=0;r<9;r++)for(let c=0;c<9;c++){
      let el=document.createElement('div');
      el.className='cell';
      if(c%3===2&&c<8)el.classList.add('thick-right');
      if(r%3===2&&r<8)el.classList.add('thick-bottom');
      if(fixed[r][c])el.classList.add('fixed');
      if(grid[r][c])el.textContent=grid[r][c];
      el.onclick=()=>select(r,c);
      board.appendChild(el);
    }
    hi();
  }

  function select(r,c){sel={r,c};hi();}
  function hi(){
    [...board.children].forEach(e=>e.classList.remove('selected','conflict'));
    if(!sel)return;
    let i=sel.r*9+sel.c;board.children[i].classList.add('selected');
    let v=grid[sel.r][sel.c];
    if(v)for(let j=0;j<81;j++){
      let rr=j/9|0,cc=j%9;
      if(grid[rr][cc]===v && (rr===sel.rcc===sel.c(rr/3|0)===(sel.r/3|0)&&(cc/3|0)===(sel.c/3|0))){
        board.children[j].classList.add('conflict');
      }
    }
  }

  function put(n){
    if(!sel||fixed[sel.r][sel.c])return;
    hist.push({r:sel.r,c:sel.c,o:grid[sel.r][sel.c]});
    grid[sel.r][sel.c]=(grid[sel.r][sel.c]===n)?0:n;
    render();
    if(!grid.flat().includes(0))win();
  }
  function win(){
    for(let r=0;r<9;r++)for(let c=0;c<9;c++){
      let v=grid[r][c];grid[r][c]=0;
      if(!ok(grid,r,c,v)){grid[r][c]=v;return;}
      grid[r][c]=v;
    }
    clearInterval(intv);
    setTimeout(()=>alert('Badhai ho! Time: '+timer.textContent+' ASIAX PRO'),300);
  }

  for(let i=1;i<=9;i++){
    let b=document.createElement('button');b.textContent=i;b.onclick=()=>put(i);numpad.appendChild(b);
  }
  let clr=document.createElement('button');clr.textContent='Clear';clr.onclick=()=>put(0);numpad.appendChild(clr);

  hintBtn.onclick=()=>{if(sel&&!grid[sel.r][sel.c])put(solution[sel.r][sel.c])};
  undoBtn.onclick=()=>{if(hist.length){let h=hist.pop();grid[h.r][h.c]=h.o;render();}};
  eraseBtn.onclick=()=>put(0);
  checkBtn.onclick=()=>hi();
  newBtn.onclick=newGame;

  newGame();
})();
</script>
</body>
</html>
